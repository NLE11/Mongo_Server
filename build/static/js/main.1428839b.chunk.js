(this.webpackJsonptodolist=this.webpackJsonptodolist||[]).push([[0],{101:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),r=a(22),s=a.n(r),i=(a(76),a(6)),o=a(7),d=a(36);function j(e,t){switch(t.type){case"LOGIN":case"REGISTER":return{username:t.username,access_token:t.access_token};case"LOGOUT":return{username:void 0,access_token:void 0};default:return e}}function u(e,t){switch(t.type){case"CREATE_TASK":return[{id:t.id,title:t.title,description:t.description,dateCreated:t.dateCreated,dateCompleted:t.dateCompleted,complete:t.complete}].concat(Object(d.a)(e));case"TOGGLE_TASK":var a=e.filter((function(e){return e.id!==t.id})),c={id:t.id,title:t.title,description:t.description,dateCreated:t.dateCreated,dateCompleted:t.dateCompleted,complete:t.complete};return[].concat(Object(d.a)(a),[c]);case"DELETE_TASK":var n=e.filter((function(e){return e.id!==t.id}));return Object(d.a)(n);case"FETCH_TASKS":return t.tasks;case"CLEAR_TASKS":return[];default:return e}}function l(e,t){return"FETCH_USERS"===t.type?t.users:e}function b(e,t){return{user:j(e.user,t),tasks:u(e.tasks,t),users:l(e.users,t)}}var O=a(10),h=a(109),x=a(107),p=a(104),f=a(1);function m(e){var t=e.show,a=e.handleClose,n=Object(c.useContext)(o.a).dispatch,r=Object(c.useState)(""),s=Object(i.a)(r,2),d=s[0],j=s[1],u=Object(c.useState)(!1),l=Object(i.a)(u,2),b=l[0],m=l[1],g=Object(c.useState)(""),v=Object(i.a)(g,2),C=v[0],k=v[1];var w=Object(O.b)((function(e,t){return{url:"auth/login",method:"post",data:{username:e,password:t}}})),y=Object(i.a)(w,2),E=y[0],S=y[1];return Object(c.useEffect)((function(){E&&!1===E.isLoading&&(E.data||E.error)&&(E.error?(m(!0),alert("failed")):(m(!1),console.log(E.data),n({type:"LOGIN",username:d,access_token:E.data.access_token})))}),[E]),Object(f.jsx)(h.a,{show:t,onHide:a,children:Object(f.jsxs)(x.a,{onSubmit:function(e){e.preventDefault(),S(d,C),a()},children:[Object(f.jsx)(h.a.Header,{closeButton:!0,children:Object(f.jsx)(h.a.Title,{children:"Login"})}),Object(f.jsxs)(h.a.Body,{children:[Object(f.jsx)(x.a.Label,{htmlFor:"login-username",children:"Username:"}),Object(f.jsx)(x.a.Control,{type:"text",value:d,onChange:function(e){j(e.target.value)},name:"login-username",id:"login-username"}),Object(f.jsx)(x.a.Label,{htmlFor:"login-password",children:"Password:"}),Object(f.jsx)(x.a.Control,{type:"password",value:C,onChange:function(e){k(e.target.value)},name:"login-password",id:"login-password"}),b&&Object(f.jsx)(x.a.Text,{style:{color:"red"},children:"Invalid username or password"})]}),Object(f.jsxs)(h.a.Footer,{children:[Object(f.jsx)(p.a,{variant:"secondary",onClick:a,children:"Cancel"}),Object(f.jsx)(p.a,{variant:"primary",disabled:0===d.length,type:"submit",children:"Login"})]})]})})}var g=a(2);function v(e){var t=e.show,a=e.handleClose,n=Object(c.useContext)(o.a).dispatch,r=Object(c.useState)({username:"",password:"",passwordRepeat:""}),s=Object(i.a)(r,2),d=s[0],j=s[1],u=Object(c.useState)(""),l=Object(i.a)(u,2),b=(l[0],l[1]),m=Object(O.b)((function(e,t){return{url:"auth/register",method:"post",data:{username:e,password:t,passwordConfirm:t}}})),v=Object(i.a)(m,2),C=v[0],k=v[1];return Object(c.useEffect)((function(){C&&C.data&&n({type:"REGISTER",username:C.data.username})}),[C]),Object(c.useEffect)((function(){C&&!1===C.isLoading&&(C.data||C.error)&&(C.error?(console.log(C),b("Registration failed, please try again later."),alert("fail")):(console.log(C),b("Registration successful. You may now login."),alert("success")))}),[C]),Object(f.jsx)(h.a,{show:t,onHide:a,children:Object(f.jsxs)(x.a,{onSubmit:function(e){e.preventDefault(),k(d.username,d.password),a()},children:[Object(f.jsx)(h.a.Header,{closeButton:!0,children:Object(f.jsx)(h.a.Title,{children:"Register"})}),Object(f.jsxs)(h.a.Body,{children:[Object(f.jsx)(x.a.Label,{htmlFor:"register-username",children:"Username:"}),Object(f.jsx)(x.a.Control,{type:"text",value:d.username,onChange:function(e){return j(Object(g.a)(Object(g.a)({},d),{},{username:e.target.value}))},name:"register-username",id:"register-username"}),Object(f.jsx)(x.a.Label,{htmlFor:"register-password",children:"Password:"}),Object(f.jsx)(x.a.Control,{type:"password",name:"register-password",id:"register-password",value:d.password,onChange:function(e){return j(Object(g.a)(Object(g.a)({},d),{},{password:e.target.value}))}}),Object(f.jsx)(x.a.Label,{htmlFor:"register-password-repeat",children:"Repeat password:"}),Object(f.jsx)(x.a.Control,{type:"password",name:"register-password-repeat",id:"register-password-repeat",value:d.passwordRepeat,onChange:function(e){return j(Object(g.a)(Object(g.a)({},d),{},{passwordRepeat:e.target.value}))}})]}),Object(f.jsxs)(h.a.Footer,{children:[Object(f.jsx)(p.a,{variant:"secondary",onClick:a,children:"Cancel"}),Object(f.jsx)(p.a,{variant:"primary",type:"submit",disabled:0===d.username.length||0===d.password.length||d.password!==d.passwordRepeat,children:"Register"})]})]})})}function C(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),r=t[0],s=t[1],d=Object(c.useState)(!1),j=Object(i.a)(d,2),u=j[0],l=j[1],b=n.a.lazy((function(){return a.e(3).then(a.bind(null,111))}));return Object(c.useContext)(o.a).state.user.username?Object(f.jsx)(b,{}):Object(f.jsxs)("div",{className:"justify-content-end",children:[Object(f.jsx)(p.a,{variant:"link",onClick:function(e){return s(!0)},children:"Login"}),Object(f.jsx)(m,{show:r,handleClose:function(){return s(!1)}}),Object(f.jsx)(p.a,{variant:"link",onClick:function(e){return l(!0)},children:"Register"}),Object(f.jsx)(v,{show:u,handleClose:function(){return l(!1)}})]})}var k=a(11),w=a(108),y=function(e){var t=e.text,a=Object(c.useContext)(o.b);return Object(f.jsx)(k.a,{href:"/",children:Object(f.jsx)(w.a.Brand,{style:{color:a.primaryColor},children:t})})},E=a(105),S=a(106);function T(e){e.setTheme,Object(c.useContext)(o.b);var t=Object(c.useContext)(o.a).state.user;return Object(f.jsx)(w.a,{bg:"light",expand:"lg",children:Object(f.jsxs)(E.a,{children:[Object(f.jsx)(w.a.Brand,{href:"/",children:Object(f.jsx)(y,{text:"MY TODO"})}),Object(f.jsx)(w.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(f.jsxs)(w.a.Collapse,{id:"basic-navbar-nav",children:[Object(f.jsxs)(S.a,{className:"me-auto",children:[t.username&&Object(f.jsx)(S.a.Link,{children:Object(f.jsx)(k.a,{href:"/task/create",children:"Create New Task"})}),Object(f.jsx)(S.a.Link,{children:Object(f.jsx)(k.a,{href:"/user",children:"User List"})})]}),Object(f.jsx)(n.a.Suspense,{fallback:"Loading...",children:Object(f.jsx)(C,{})})]})]})})}var L=a(110);function _(e){var t=e.id,a=e.title,n=e.description,r=e.dateCreated,s=e.dateCompleted,d=e.complete,j=e.short,u=void 0!==j&&j,l=new Date,b=l.getMonth()+1,h=l.getFullYear(),x=l.getDate(),m=w(l.getHours()),g=w(l.getMinutes()),v=w(l.getSeconds()),C="".concat(b,"/").concat(x,"/").concat(h," ").concat(m,":").concat(g,":").concat(v);function w(e){return e<10?"0".concat(e):e}var y=Object(c.useContext)(o.b).secondaryColor,E=Object(c.useContext)(o.a).dispatch,S=n;u&&n.length>30&&(S=n.substring(0,30)+"...");var T=Object(O.b)((function(){return{url:"/tasks/".concat(t),method:"delete"}})),_=Object(i.a)(T,2),F=_[0],R=_[1],A=Object(O.b)((function(e){var a=e.complete,c=e.dateCompleted;return{url:"/tasks/".concat(t),method:"patch",data:{complete:a,dateCompleted:c}}})),D=Object(i.a)(A,2),G=D[0],H=D[1];Object(c.useEffect)((function(){F&&!1===F.isLoading&&void 0!==F.data&&E({type:"DELETE_TASK",id:F.data.id})}),[F]),Object(c.useEffect)((function(){G&&!1===G.isLoading&&G.data&&E({type:"TOGGLE_TASK",id:G.data.id,complete:G.data.complete,dateCompleted:G.data.dateCompleted,dateCreated:G.data.dateCreated,description:G.data.description,title:G.data.title})}),[G]);return Object(f.jsx)(L.a,{children:Object(f.jsxs)(L.a.Body,{children:[Object(f.jsx)(L.a.Title,{children:Object(f.jsx)(k.a,{style:{color:y},href:"/task/".concat(t),children:a})}),Object(f.jsx)("br",{}),Object(f.jsxs)(L.a.Subtitle,{children:[Object(f.jsxs)("i",{children:["Date Created: ",Object(f.jsx)("b",{children:r}),Object(f.jsx)("br",{})]}),Object(f.jsxs)("i",{children:["Date Completed: ",Object(f.jsx)("b",{children:s}),Object(f.jsx)("br",{})]}),Object(f.jsx)("div",{children:Object(f.jsxs)("label",{children:[" ",Object(f.jsx)("input",{type:"checkbox",checked:d,onChange:function(e){var t=null;t=e.target.checked?C:null,H({complete:e.target.checked,dateCompleted:t})}}),"Complete"]})}),Object(f.jsx)(p.a,{variant:"primary",onClick:function(){R()},size:"sm",children:"Delete"})," "]}),Object(f.jsx)("br",{}),Object(f.jsx)(L.a.Text,{children:S}),u&&Object(f.jsx)(k.a,{href:"/task/".concat(t),children:"View full task"})]})})}var F=n.a.memo(_);function R(){var e=Object(c.useContext)(o.a).state.tasks;return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:" "}),e.sort((function(e,t){return e.id>t.id?1:-1})).map((function(e,t){return Object(c.createElement)(F,Object(g.a)(Object(g.a)({},e),{},{short:!0,key:"task-"+t,index:e.id}))}))]})}function A(){var e=Object(c.useContext)(o.a),t=e.state,a=e.dispatch,n=Object(O.b)((function(){return{url:"/task",method:"get",headers:{Authorization:"".concat(t.user.access_token)}}})),r=Object(i.a)(n,2),s=r[0],d=r[1];Object(c.useEffect)((function(){d()}),[t.user.access_token]),Object(c.useEffect)((function(){s&&!1===s.isLoading&&s.data&&a({type:"FETCH_TASKS",tasks:s.data.tasks})}),[s]);s.data;var j=s.isLoading;return Object(f.jsxs)(f.Fragment,{children:[j&&"Tasks loading..."," ",Object(f.jsx)(R,{})]})}var D=a(12);function G(){var e=Object(c.useContext)(o.a),t=e.state,a=e.dispatch,n=Object(c.useState)(""),r=Object(i.a)(n,2),s=r[0],d=r[1],j=Object(c.useState)(""),u=Object(i.a)(j,2),l=u[0],b=u[1],h=new Date,x=h.getMonth()+1,p=h.getFullYear(),m=h.getDate(),g=y(h.getHours()),v=y(h.getMinutes()),C=y(h.getSeconds()),w="".concat(x,"/").concat(m,"/").concat(p," ").concat(g,":").concat(v,":").concat(C);function y(e){return e<10?"0".concat(e):e}console.log(w);var E=Object(O.b)((function(e){var a=e.title,c=e.description,n=e.dateCreated,r=e.dateCompleted,s=e.complete,i=e.author;return{url:"/task",method:"post",headers:{Authorization:"".concat(t.user.access_token)},data:{title:a,description:c,dateCreated:n,dateCompleted:r,complete:s,author:i}}})),S=Object(i.a)(E,2),T=S[0],L=S[1],_=Object(k.d)();return Object(c.useEffect)((function(){T&&!1===T.isLoading&&T.data&&(a({type:"CREATE_TASK",id:T.data.id,title:T.data.title,description:T.data.description,dateCreated:T.data.dateCreated,dateCompleted:T.data.dateCompleted,complete:T.data.complete,author:t.user.username}),console.log(T.data),_.navigate("/task/".concat(T.data.id)))}),[T]),Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),L({title:s,description:l,dateCreated:w,dateCompleted:null,complete:!1,author:t.user.username})},children:[Object(f.jsxs)("div",{children:["User: ",Object(f.jsx)("b",{children:t.user.username})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{htmlFor:"create-title",children:"Title:"})," ",Object(f.jsx)("br",{}),Object(f.jsx)("input",{type:"text",value:s,onChange:function(e){d(e.target.value)},name:"create-title",id:"create-title"})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{htmlFor:"create-description",children:"Description:"})," ",Object(f.jsx)("br",{}),Object(f.jsx)("textarea",{value:l,onChange:function(e){b(e.target.value)}})]}),Object(f.jsx)("input",{type:"submit",value:"Submit"})]})}function H(e){var t=e.id,a=Object(c.useContext)(o.a).state,n=Object(O.b)((function(){return{url:"/task/".concat(t),headers:{Authorization:"".concat(a.user.access_token)},method:"get"}})),r=Object(i.a)(n,2),s=r[0],d=r[1];return Object(c.useEffect)(d,[t]),Object(f.jsxs)("div",{children:[s&&s.data?Object(f.jsx)(F,Object(g.a)({},s.data)):"Loading...",Object(f.jsx)("hr",{}),Object(f.jsx)("div",{children:Object(f.jsx)(k.a,{href:"/",children:"Go back"})})]})}function B(e){var t=e._id,a=e.username,c=Object(k.d)();return Object(f.jsx)(L.a,{children:Object(f.jsxs)(L.a.Body,{children:[Object(f.jsx)(L.a.Title,{onClick:function(){c.navigate("/user/".concat(t))},children:a}),Object(f.jsx)("br",{})]})})}var K=n.a.memo(B);function U(){var e=Object(c.useContext)(o.a).state.users;return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:" User List"}),e.sort((function(e,t){return e._id>t._id?1:-1})).map((function(e,t){return Object(c.createElement)(K,Object(g.a)(Object(g.a)({},e),{},{short:!0,key:"user-"+t,index:e._id}))}))]})}function I(){var e=Object(c.useContext)(o.a),t=(e.state,e.dispatch),a=Object(O.b)((function(){return{url:"/user",method:"get"}})),n=Object(i.a)(a,2),r=n[0],s=n[1];Object(c.useEffect)(s,[]),Object(c.useEffect)((function(){r&&!1===r.isLoading&&r.data&&t({type:"FETCH_USERS",users:r.data.users})}),[r]);r.data;var d=r.isLoading;return Object(f.jsxs)(f.Fragment,{children:[d&&"Users loading..."," ",Object(f.jsx)(U,{})]})}function M(e){var t=e.id;console.log(t);var a=Object(c.useContext)(o.a),n=(a.state,a.dispatch),r=Object(O.b)((function(){return{url:"/user/".concat(t),method:"get"}})),s=Object(i.a)(r,2),d=s[0],j=s[1];Object(c.useEffect)(j,[]),Object(c.useEffect)((function(){d&&!1===d.isLoading&&d.data&&n({type:"FETCH_TASKS",tasks:d.data})}),[d]);d.data;var u=d.isLoading;return Object(f.jsxs)("div",{children:[Object(f.jsx)("hr",{}),Object(f.jsxs)("div",{children:[Object(f.jsx)(k.a,{href:"/",children:"Go back"}),u&&"Tasks loading..."," ",Object(f.jsx)(R,{})]})]})}var P=function(){var e=Object(c.useReducer)(b,{user:{},tasks:[],users:[]}),t=Object(i.a)(e,2),a=t[0],n=t[1],r=(a.user,Object(c.useState)({primaryColor:"brown",secondaryColor:"green"})),s=Object(i.a)(r,2),d=s[0],j=s[1],u=Object(D.f)({"/":Object(D.g)({view:Object(f.jsx)(A,{})}),"/task/create":Object(D.g)({view:Object(f.jsx)(G,{})}),"/task/:id":Object(D.g)((function(e){return{view:Object(f.jsx)(H,{id:e.params.id})}})),"/user":Object(D.g)({view:Object(f.jsx)(I,{})}),"/user/:id":Object(D.g)((function(e){return{view:Object(f.jsx)(M,{id:e.params.id})}}))});return Object(f.jsx)("div",{children:Object(f.jsx)(o.b.Provider,{value:d,children:Object(f.jsx)(o.a.Provider,{value:{state:a,dispatch:n},children:Object(f.jsx)(k.b,{routes:u,children:Object(f.jsxs)(E.a,{children:[Object(f.jsx)(T,{setTheme:j}),Object(f.jsx)("hr",{}),Object(f.jsx)(k.c,{})]})})})})})},z=function(e){e&&e instanceof Function&&a.e(4).then(a.bind(null,112)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),c(e),n(e),r(e),s(e)}))},N=a(38),Y=a.n(N).a.create({baseURL:"/"});s.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(O.a,{value:Y,children:Object(f.jsx)(P,{})})}),document.getElementById("root")),z()},7:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return s}));var c=a(0),n=a.n(c),r=n.a.createContext({primaryColor:"deepskyblue",secondaryColor:"coral"}),s=n.a.createContext({state:{},dispatch:function(){}})},76:function(e,t,a){}},[[101,1,2]]]);
//# sourceMappingURL=main.1428839b.chunk.js.map